(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{726:function(s,a,t){"use strict";t.r(a);var n=t(27),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"mac-使用-nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mac-使用-nginx"}},[s._v("#")]),s._v(" mac 使用 nginx")]),s._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("p",[s._v("使用 "),t("a",{attrs:{href:"https://brew.sh/index_zh-cn.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("homebrew"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看在 homebrew 源中是否存在 nginx")]),s._v("\nbrew search nginx\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看信息")]),s._v("\nbrew info nginx\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装")]),s._v("\nbrew "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx\n")])])]),t("p",[s._v("当前安装的是 1.19.3 版本")]),s._v(" "),t("h2",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开安装目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" /usr/local/Cellar/nginx\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开配置目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" /usr/local/etc/nginx/\n")])])]),t("p",[s._v("默认网站目录 /usr/local/Cellar/nginx/1.19.3/html 其指向 /usr/local/var/www")]),s._v(" "),t("p",[s._v("配置文件位置 /usr/local/etc/nginx/nginx.conf")]),s._v(" "),t("p",[s._v("注意 需要配置网站目录的访问权限")]),s._v(" "),t("h2",{attrs:{id:"指令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指令"}},[s._v("#")]),s._v(" 指令")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\nnginx\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止")]),s._v("\nnginx -s stop\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 详细指令")]),s._v("\n-?,-h         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" this "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v("\n-v            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" show version and "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n-V            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" show version and configure options "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n-t            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" configuration and "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n-T            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" configuration, dump it and "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n-q            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" suppress non-error messages during configuration testing\n-s signal     "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" send signal to a master process: stop, quit, reopen, reload\n-p prefix     "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" prefix path "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: /usr/local/Cellar/nginx/1.19.3/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n-c filename   "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" configuration "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: /usr/local/etc/nginx/nginx.conf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n-g directives "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" global directives out of configuration "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n")])])]),t("h2",{attrs:{id:"https-证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#https-证书"}},[s._v("#")]),s._v(" HTTPS 证书")]),s._v(" "),t("p",[s._v("Key 是私用秘钥，通常是 RSA 算法\nCsr 是证书请求文件，用于申请证书\nCrt 是 CA 认证后的证书文件，签署人用自己的 key 给你签署凭证")]),s._v(" "),t("h3",{attrs:{id:"生成密钥和证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成密钥和证书"}},[s._v("#")]),s._v(" 生成密钥和证书")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开 nginx 配置文件目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/etc/nginx\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建服务器私钥")]),s._v("\nopenssl genrsa -out server.key（起的私钥名字） "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据私钥生成证书申请，创建签名请求的证书（CSR）")]),s._v("\nopenssl req -new -key server.key（起的私钥名字）-out server.csr（证书名字）\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据提示填入 Country，Province 等信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最重要的是有一个 common name，可以写你的名字或者域名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果为了申请 https 域名，这个必须和域名吻合，否则会引发浏览器警报")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份服务器密钥文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" server.key server.key.org\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 去除文件口令")]),s._v("\nopenssl rsa -in server.key.org -out server.key\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成证书文件server.crt")]),s._v("\nopenssl x509 -req -in server.csr -out server.crt -signkey server.key -days "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3650")]),s._v("\n")])])]),t("h3",{attrs:{id:"修改-nginx-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改-nginx-配置"}},[s._v("#")]),s._v(" 修改 nginx 配置")]),s._v(" "),t("p",[s._v("修改/usr/local/etc/nginx/nginx.conf 文件")]),s._v(" "),t("div",{staticClass:"language-nginx extra-class"},[t("pre",{pre:!0,attrs:{class:"language-nginx"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_certificate")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("crt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server.crt 文件位置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_certificate_key")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server.key 文件位置")]),s._v("\n")])])]),t("h3",{attrs:{id:"重启-nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重启-nginx"}},[s._v("#")]),s._v(" 重启 nginx")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("nginx -s reload\n")])])]),t("h3",{attrs:{id:"修改-hosts-文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改-hosts-文件"}},[s._v("#")]),s._v(" 修改 hosts 文件")]),s._v(" "),t("p",[s._v("hosts 文件是本地的 IP 和 域名的一个对应解析，在进行网站未上线之前的测试经常需要用到。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /private/etc/hosts\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1  test.com  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需要配置的域名")]),s._v("\n")])])]),t("p",[s._v("在浏览器输入配置好的域名即可访问")])])}),[],!1,null,null,null);a.default=e.exports}}]);